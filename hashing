#include <stdio.h>
#include <string.h>
#define SIZE 10

typedef struct { char name[30]; long long phone; } Client;
Client h[SIZE];
int hash(char *s){int sum=0;for(int i=0;s[i];i++)sum+=s[i];return sum%SIZE;}
int hash2(char *s){int sum=0;for(int i=0;s[i];i++)sum+=s[i];return 7-(sum%7);}
void insert(char *n,long long p,int t){
    int i,idx=hash(n),step=(t==3?hash2(n):1);
    for(i=0;i<SIZE;i++){
        int pos=(t==2)?(idx+i*i)%SIZE:(idx+i*step)%SIZE;
        if(h[pos].phone==-1){strcpy(h[pos].name,n);h[pos].phone=p;return;}
    }
    printf("Table full!\n");
}
long long search(char *n){
    for(int i=0;i<SIZE;i++){
        int pos=(hash(n)+i)%SIZE;
        if(h[pos].phone==-1) return -1;
        if(!strcmp(h[pos].name,n)) return h[pos].phone;
    }
    return -1;
}

int main(){
    for(int i=0;i<SIZE;i++)h[i].phone=-1;
    int c,n;char name[30];long long p;
    printf("Collision Handling Technique");
    printf("\n1.Linear\n 2.Quadratic\n 3.Double\nChoice: ");scanf("%d",&c);
    printf("No. of clients: ");scanf("%d",&n);
    for(int i=0;i<n;i++){
        printf("\nName: ");scanf("%s",name);
        printf("Phone number: ");scanf("%lld",&p);
        insert(name,p,c);
    }
    printf("\nIndex\tName\tPhone\n---------------------\n");
    for(int i=0;i<SIZE;i++)
        (h[i].phone!=-1)?printf("%d\t%s\t%lld\n",i,h[i].name,h[i].phone):printf("%d\t---\n",i);
    printf("\nSearch name: ");scanf("%s",name);
    long long r=search(name);
    printf((r!=-1)?"Phone: %lld\n":"Client not found!\n",r);
}

