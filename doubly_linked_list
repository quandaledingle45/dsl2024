#include <stdio.h>
#include <stdlib.h>

typedef struct Node {
    int seat, booked;
    struct Node *prev, *next;
} Node;

Node* create(int n) {
    Node *head = NULL, *temp = NULL;
    for (int i = 1; i <= n; i++) {
        Node *p = malloc(sizeof(Node));
        p->seat = i; p->booked = 0; p->next = p->prev = NULL;
        if (!head) head = p; 
        else { temp->next = p; p->prev = temp; }
        temp = p;
    }
    return head;
}

Node* find(Node *h, int s) {
    while (h && h->seat != s) h = h->next;
    return h;
}

void book(Node *h, int s) {
    Node *t = find(h, s);
    if (!t) printf("Invalid seat number!\n");
    else if (t->booked) printf("Seat %d is not available.\n", s);
    else { t->booked = 1; printf("Seat %d booked successfully!\n", s); }
}

void cancel(Node *h, int s) {
    Node *t = find(h, s);
    if (!t) printf("Invalid seat number!\n");
    else if (!t->booked) printf("Seat %d is already available.\n", s);
    else { t->booked = 0; printf("Seat %d booking canceled!\n", s); }
}

// Display all seats
void display(Node *h) {
    printf("\n--- Seat Status ---\n");
    while (h) {
        printf("Seat %2d : [%s]\n", h->seat, h->booked ? "Booked" : "Available");
        h = h->next;
    }
}

int main() {
    Node *head = create(10);
    int ch, s;

    do {
        printf("\n--- Cinemax Ticket Booking ---\n");
        printf("1. Display Seats\n2. Book Seat\n3. Cancel Booking\n0. Exit\nChoice: ");
        scanf("%d", &ch);

        if (ch == 1) display(head);
        else if (ch == 2) { printf("Enter seat number: "); scanf("%d", &s); book(head, s); }
        else if (ch == 3) { printf("Enter seat number: "); scanf("%d", &s); cancel(head, s); }
    } while (ch != 0);
}

