#include <stdio.h>
#include <ctype.h>

char s[50]; int top=-1;
void push(char c){ s[++top]=c; }
char pop(){ return s[top--]; }
int prec(char c){ return (c=='+'||c=='-')?1:(c=='*'?2:0); }

void infixToPostfix(char in[], char post[]){
    int j=0; char c;
    for(int i=0; in[i]; i++){
        c=in[i];
        if(isalnum(c)) post[j++]=c;
        else if(c=='(') push(c);
        else if(c==')'){ while(s[top]!='(') post[j++]=pop(); pop(); }
        else{ while(top!=-1 && prec(s[top])>=prec(c)) post[j++]=pop(); push(c); }
    }
    while(top!=-1) post[j++]=pop();
    post[j]='\0';
}

int eval(char post[]){
    int st[50],t=-1,a,b;
    for(int i=0; post[i]; i++){
        if(isdigit(post[i])) st[++t]=post[i]-'0';
        else{
            b=st[t--]; a=st[t--];
            st[++t]=(post[i]=='+')?a+b:(post[i]=='-')?a-b:a*b;
        }
    }
    return st[t];
}

int main(){
    char in[50],post[50];
    printf("Enter infix expression: ");
    scanf("%s",in);
    infixToPostfix(in,post);
    printf("Postfix: %s\n",post);
    printf("Result: %d\n",eval(post));
}
