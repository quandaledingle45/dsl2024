#include <stdio.h>
#include <string.h>

#define MAX 10

int adj[MAX][MAX];
char cities[MAX][20];
int cityCount = 0;
int visited[MAX];

// Function to find city index by name
int findCity(char name[]) {
    for (int i = 0; i < cityCount; i++) {
        if (strcmp(cities[i], name) == 0)
            return i;
    }
    return -1; // not found
}

// Add a new city
void addCity() {
    if (cityCount == MAX) {
        printf("Cannot add more cities.\n");
        return;
    }
    printf("Enter city name: ");
    scanf("%s", cities[cityCount]);
    cityCount++;
    printf("City added successfully.\n");
}

// Add flight path between two cities
void addFlight() {
    char src[20], dest[20];
    int cost;
    printf("Enter source city: ");
    scanf("%s", src);
    printf("Enter destination city: ");
    scanf("%s", dest);
    printf("Enter cost (time/fuel): ");
    scanf("%d", &cost);

    int i = findCity(src);
    int j = findCity(dest);

    if (i == -1 || j == -1) {
        printf("Invalid city name(s).\n");
        return;
    }

    adj[i][j] = cost;
    adj[j][i] = cost;  // since undirected graph
    printf("Flight path added successfully.\n");
}

// Display adjacency matrix
void displayGraph() {
    if (cityCount == 0) {
        printf("No cities added yet.\n");
        return;
    }

    printf("\nFlight Path Graph (Adjacency Matrix):\n     ");
    for (int i = 0; i < cityCount; i++)
        printf("%-8s", cities[i]);
    printf("\n");

    for (int i = 0; i < cityCount; i++) {
        printf("%-8s", cities[i]);
        for (int j = 0; j < cityCount; j++)
            printf("%-8d", adj[i][j]);
        printf("\n");
    }
}

// DFS for connectivity check
void dfs(int v) {
    visited[v] = 1;
    for (int i = 0; i < cityCount; i++) {
        if (adj[v][i] != 0 && visited[i] == 0)
            dfs(i);
    }
}

// Check if graph is connected
void checkConnected() {
    if (cityCount == 0) {
        printf("No cities available to check.\n");
        return;
    }

    for (int i = 0; i < cityCount; i++)
        visited[i] = 0;

    dfs(0);

    for (int i = 0; i < cityCount; i++) {
        if (visited[i] == 0) {
            printf("The flight network is NOT connected.\n");
            return;
        }
    }
    printf("The flight network is CONNECTED.\n");
}

int main() {
    int choice;

    do {
        printf("\n--- Flight Path Graph Menu ---\n");
        printf("1. Add city\n");
        printf("2. Add flight path\n");
        printf("3. Display flight graph\n");
        printf("4. Check if graph is connected\n");
        printf("5. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);

        switch (choice) {
            case 1: addCity(); break;
            case 2: addFlight(); break;
            case 3: displayGraph(); break;
            case 4: checkConnected(); break;
            case 5: printf("Exiting...\n"); break;
            default: printf("Invalid choice! Try again.\n");
        }
    } while (choice != 5);

    return 0;
}
